<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bot Reservas Inteligente - Parque Hidalgo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ... (estilos anteriores se mantienen igual) ... */
    </style>
</head>
<body>
    <div id="app">
        <!-- ... (resto del HTML se mantiene igual) ... -->
        
        <!-- Panel de Errores CORREGIDO -->
        <div v-if="showErrorPanel" class="error-panel">
            <div class="error-panel-content">
                <div class="error-panel-header">
                    <h3 class="text-xl font-bold text-red-400">
                        <i class="fas fa-bug mr-2"></i> Errores Detectados
                    </h3>
                    <button @click="showErrorPanel = false" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="error-panel-body">
                    <div class="log-box">
                        <div v-for="(error, index) in errorLogs" :key="index" 
                             class="py-3 border-b border-gray-700 last:border-0">
                            <div class="text-red-400 font-bold">
                                [{{ error.type }}] {{ error.message }}
                            </div>
                            <div class="text-gray-400 text-sm mt-1">
                                {{ error.timestamp }} | Paso: {{ error.step }}
                            </div>
                            <div v-if="error.details" class="text-gray-300 mt-2 whitespace-pre-wrap">{{ error.details }}</div>
                        </div>
                        <div v-if="errorLogs.length === 0" class="text-gray-400 text-center py-10 text-lg">
                            <i class="fas fa-check-circle mr-2"></i> No se han detectado errores
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
    const { createApp, ref, computed, onMounted } = Vue;
    
    const SPORTS_DATA = { 
        // ... (datos de deportes se mantienen igual) ...
    };
    
    const ERROR_TYPES = {
        AUTH: "Autenticación",
        SCHEDULE: "Horarios",
        ACTIVITY: "Actividad",
        RESERVATION: "Reserva",
        SYSTEM: "Sistema"
    };

    createApp({
        setup() {
            // ... (variables anteriores se mantienen igual) ...
            
            // CORRECCIÓN: Inicializar errorLogs como array vacío
            const errorLogs = ref([]);
            const showErrorPanel = ref(false);

            // ... (resto del código se mantiene igual) ...

            // Logger corregido
            const logger = {
                info: (msg, details) => logs.value.push({ 
                    message: msg, 
                    details,
                    color: 'text-green-400',
                    icon: '✅'
                }), 
                error: (msg, error, step, type) => {
                    const errorObj = {
                        message: msg,
                        error: error?.message || error,
                        step: step,
                        type: type,
                        timestamp: new Date().toLocaleTimeString(),
                        details: error?.response ? error.response : (error?.details || '')
                    };
                    
                    logs.value.push({ 
                        message: `❌ ${msg}`, 
                        error: errorObj.error,
                        details: errorObj.details,
                        color: 'text-red-400',
                        icon: '❌'
                    });
                    
                    // Registrar en el panel de errores específicos
                    errorLogs.value.push(errorObj);
                },
                // ... (resto del logger se mantiene igual) ...
            };
            
            // ... (resto de las funciones se mantienen igual) ...

            return { 
                // ... (variables anteriores) ...
                errorLogs,
                showErrorPanel,
                openErrorPanel,
                // ... (resto de funciones) ...
            };
        }
    }).mount('#app');
    </script>
</body>
</html>
